<mat-drawer-container class="formdrawer-container" hasBackdrop="false">
    <mat-drawer id="formDrawer" mode="over" position="end" #formDrawer class="border">
        <div style="min-width: 400px;">
            <app-history [module]="module" (close)="onClose()"></app-history>
        </div>
    </mat-drawer>

    <section class="clearfix">
        <div class="table-box customerbox" [ngClass]="{ collapsed: isDetailVisible }">
            <div class="heading-row clearfix">
                <p class="d-md-inline" *ngIf="!isDetailVisible">
                    <i class="os-icon os-icon-user mr-2" aria-hidden="true"></i> All Orders
                </p>
                <div class="d-inline float-right">
                    <!-- <button type="button" class="btn btn-sm btn-p mr-2" (click)="openReadOCR()" appPermission [permissions]="userPermissions" [type]="'create'">
                        <i class="fa fa-file-pdf-o iconCl mr-2" aria-hidden="true"></i><span>PDF</span>
                    </button> -->
                    <button type="button" class="btn btn-sm btn-p" (click)="openForm()" appPermission [permissions]="userPermissions" [type]="'create'">
                        <i class="os-icon os-icon-plus mr-2" aria-hidden="true"></i>&nbsp;New
                    </button>&nbsp;
                    <button type="button" class="btn btn-sm btn-p" (click)="openOrderView()">
                        <i class="os-icon os-icon-eye mr-2" aria-hidden="true"></i>&nbsp;View
                    </button>&nbsp;
                    <button *ngIf="(checkedRows.length > 0) && (currentRole=='Storekeeper'  || currentRole=='Warehouse')" class="btn btn-sm btn-white dropdown-toggle ml-2" mat-button [matMenuTriggerFor]="menu2">
                        Bulk Actions
                    </button>
                    <mat-menu #menu2="matMenu">
                        <button mat-menu-item (click)="bulkAction('active')" *ngIf="currentRole=='Warehouse' "> Generate
                            PickSlip</button>

                        <button mat-menu-item *ngIf="currentRole=='Storekeeper' " (click)="confirOrderApprovedReject('Approved')">
                            Approved</button>

                        <button mat-menu-item *ngIf="currentRole=='Storekeeper' " (click)="confirOrderApprovedReject('Rejected')">
                            Rejected</button>
                        <!-- <button mat-menu-item (click)="bulkAction('delete')" appPermission [permissions]="userPermissions" [type]="'delete'">
              Delete
            </button> -->
                    </mat-menu>
                    <!-- impot /Export  -->
                    <button class="btn btn-sm btn-white ml-2 dropdown-toggle" [matMenuTriggerFor]="menu4" *ngIf="currentRole=='Warehouse' || currentRole=='SC'">
                        <i class="fa fa-bars" aria-hidden="true"></i>
                    </button>
                    <mat-menu #menu4="matMenu">

                        <button mat-menu-item type="button" (click)="openExportOrder()">Export Order</button>
                        <!-- <button mat-menu-item type="button" (click)="openUpdateDelivery()">Allocation Order</button> -->
                    </mat-menu>
                    <button class="btn btn-sm btn-white ml-2 dropdown-toggle" [matMenuTriggerFor]="menu3" *ngIf="currentRole=='Storekeeper' || currentRole=='org-admin'">
                        <i class="fa fa-bars" aria-hidden="true"></i>
                    </button>
                    <mat-menu #menu3="matMenu">
                        <button mat-menu-item (click)="openImportOrder()" [type]="'create'">Import Order</button>
                        <button mat-menu-item type="button" (click)="openExportOrder()">Export Order</button>
                        <button mat-menu-item type="button" (click)="infiniteOrder()">Infinite Order</button>

                        <!-- <button mat-menu-item type="button" (click)="openUpdateDelivery()">Allocation Order</button> -->
                    </mat-menu>
                </div>
            </div>

            <!-- <div class="heading-row clearfix" *ngIf="!isDetailVisible">
                <mat-card class="entity-card">
                    <div class="col-sm-12 row">
                        <div class="col-sm-3 text-left entity-card-pl-1">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon icon-xxlg-md mt-2 entity-card-svg">
                                <circle class="outer-circle" cx="256" cy="256" r="256" style="fill: #f3c482;"></circle>
                                <path class="inner-arrow" style="fill: #a17436;"
                                    d="M195.4 332.7h108.8c8.9 0 16.2-7.3 16.2-16.2 0-8.9-7.3-16.2-16.2-16.2h-69.8l93.6-93.6c6.3-6.3 6.3-16.5 0-22.9-6.3-6.3-16.5-6.3-22.9 0l-93.6 93.6v-69.8c0-8.9-7.3-16.2-16.2-16.2-4.5 0-8.5 1.8-11.4 4.7-2.9 2.9-4.7 7-4.7 11.4v108.8c.1 9.2 7.3 16.4 16.2 16.4z">
                                </path>
                            </svg>
                            <div>
                                <div class="entity-card-total">
                                    Total Open Orders.
                                </div>
                                <div class="entity-card-total-amount">232 &nbsp;&nbsp;
                                    <a><i class="fa fa-refresh"></i> Refresh</a>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-2 text-center entity-card-item">
                            <p class="entity-card-item-text"> Delivered</p>
                            <p class="entity-card-fs-15">232</p>

                        </div>
                        <div class="col-sm-2 text-center entity-card-item">
                            <p class="entity-card-item-text"> Cancelled</p>
                            <p class="entity-card-fs-15">232</p>

                        </div>
                        <div class="col-sm-2 text-center entity-card-item">
                            <p class="entity-card-item-text"> Invoiced</p>
                            <p class="entity-card-fs-15">232</p>

                        </div>
                        <div class="col-sm-3 text-left entity-card-end-item">
                            <p class="entity-card-item-text"> Average No of days being open</p>
                            <p class="entity-card-fs-15" style="margin-left: 5px;font-weight: 600;">32</p>

                        </div>
                    </div>
                </mat-card>
            </div> -->
            <app-order-data-table [newOrderData]="newOrderData" (detailsClosed)="closeClicked()" (itemClicked)="itemClicked($event)" (selectedRows)="selectedRows($event)" (updatedOrder)="updatedList($event)">
            </app-order-data-table>
        </div>
        <div class="details-box" [ngClass]="{ expanded: isDetailVisible }">
            <app-order-detail (detailsClosed)="closeClicked()" [isDetailVisible]="isDetailVisible" [orderData]="orderData" (toggleHistory)="openHistoryView()" [updatedLists]="allOrderList">
            </app-order-detail>
        </div>
    </section>
</mat-drawer-container>
<ng-container *ngFor="let orderData of checkedRows;let i=index">

    <div hidden id="print-section{{i}}">
        <div class="row" [ngStyle]="{'margin-top': i==0 ? '30px' : 'none' }">
            <div class="col-xs-6">
                <div>
                    <div class="question-arrow">Sold To: </div>
                    <p class="indent-text" style="font-size: 10px;">
                        <span>{{orderData?.customer?.customer_info?.customer_code}}</span><br>
                        <span style="line-height: 30px;">
                            {{orderData?.customer?.firstname}} {{orderData?.customer?.lastname}}<br>
                        </span>

                        <span style="line-height: 30px;">
                            {{orderData?.customer?.customer_info?.customer_address_1}}<br>
                            {{orderData?.customer?.customer_info?.customer_address_2}}<br>
                            {{orderData?.customer?.customer_info?.customer_address_3?orderData?.customer?.customer_info?.customer_address_3:'-'}}<br>
                        </span>
                        <span style="line-height: 30px;">
                            {{orderData?.storageocation?.name}}<br>
                            {{orderData?.picking_slip_generator?.user?.firstname}}
                            {{orderData?.picking_slip_generator?.user?.lastname}}<br>
                        </span>
                    </p>
                </div>
                <div>
                    <div class="question-arrow">Customer PO: </div>
                    <p class="indent-text" style="font-size: 10px;">{{orderData?.customer_lop}}</p>
                </div>
            </div>
            <div class="col-xs-3">
                <div>
                    <strong style="letter-spacing: 4px;font-family: Times New Roman, Times, serif;font-size: 16px;">PICK
                        SLIP</strong><br><br><br><br>
                    <div>
                        <p class="dateTime">Date: {{orderData?.picking_slip_generator?.date}}</p>
                    </div>
                    <div>
                        <p class="dateTime">Time: {{orderData?.created_at| date:'hh:mm:ss'}}</p>
                    </div>
                    <div>
                        <p class="dateTime">Page: 1</p>
                    </div>
                </div>
            </div>
            <div class="col-xs-3">
                <div>
                    <div class="question-arrow">Route Code: </div>
                    <p class="indent-text" style="font-size: 10px;text-align: right;">
                        {{orderData?.route?.code?orderData?.route?.code:'0000'}}</p>
                </div>
                <br>
                <div>
                    <div class="question-arrow">Order Number: </div>
                    <p class="indent-text" style="font-size: 10px;text-align: right;">{{orderData?.order_number}}</p>
                </div>
                <br>
                <div>
                    <div class="question-arrow">Brn/Plt: </div>
                    <p class="indent-text" style="font-size: 10px;text-align: right;">{{ orderData?.storageocation?.code}}
                    </p>
                </div>
                <br>
                <div>
                    <div class="question-arrow">Pick Slip #: </div>
                    <p class="indent-text" style="font-size: 10px;text-align: right;font-weight: bold;">
                        {{orderData?.picking_slip_generator?.id}}</p>
                </div>
                <br>
                <div>
                    <div class="question-arrow">Order Date: </div>
                    <p class="indent-text" style="font-size: 10px;text-align: right;">{{orderData?.delivery_date}}</p>
                </div>
            </div>

        </div>


        <div class="row">
            <div class="col-md-12">
                <div>

                    <div>
                        <div>
                            <table class="table">
                                <thead>
                                    <tr style="font-size:10px;font-family: Times New Roman, Times, serif;">
                                        <td>Description</td>
                                        <td class="text-center">Item Number</td>
                                        <td class="text-center">UOM</td>
                                        <td class="text-right">Shipped</td>
                                        <td class="text-right">Truck</td>
                                        <td class="text-right">Location</td>
                                        <td class="text-right">Expiration Date</td>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- foreach ($order->lineItems as $line) or some such thing here -->
                                    <tr *ngFor="let item of orderData?.order_details" height="40px" style="font-size:10px;font-family: Times New Roman, Times, serif;line-height: 20px;">
                                        <td>{{item?.item?.item_name}}</td>
                                        <td class="text-center">{{item?.item?.item_code}}</td>
                                        <td class="text-center">{{item?.item_uom?.name}}</td>
                                        <td class="text-right">{{item?.item_qty}}</td>
                                        <td class="text-right">NFPC</td>
                                        <td class="text-right">-</td>
                                        <td class="text-right">-</td>

                                    </tr>

                                </tbody>
                            </table>
                        </div>
                        <div style="font-size: 10px;">
                            <div class="col-xs-4">
                                Driver Signature
                            </div>
                            <div class="col-xs-4">
                                Customer Signature
                            </div>
                            <div class="col-xs-4">
                                **Final**
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <ng-container *ngIf="i>=0">
            <div style="break-after:page"></div>
        </ng-container>
    </div>

</ng-container>